import BN from "bn.js";
import type { FeedEvalResponse } from "@switchboard-xyz/on-demand";
import { CrossbarClient } from "@switchboard-xyz/on-demand";
import { SwitchboardClient, CommonOptions, Queue } from "../index.js";
import { SimpleTransaction } from "@aptos-labs/ts-sdk";
export interface AggregatorInitParams extends CommonOptions {
    name: string;
    feedHash: string;
    minSampleSize: number;
    maxStalenessSeconds: number;
    maxVariance: number;
    minResponses: number;
}
export interface AggregatorConfigParams extends CommonOptions {
    aggregator: string;
    name: string;
    feedHash: string;
    minSampleSize: number;
    maxStalenessSeconds: number;
    maxVariance: number;
    minResponses: number;
}
export interface AggregatorSetAuthorityParams extends CommonOptions {
    aggregator: string;
    newAuthority: string;
}
export interface AggregatorConfigs {
    feedHash: string;
    maxVariance: number;
    minResponses: number;
    minSampleSize: number;
}
export interface AggregatorFetchUpdateIxParams extends CommonOptions {
    solanaRPCUrl?: string;
    crossbarUrl?: string;
    crossbarClient?: CrossbarClient;
    feedConfigs?: AggregatorConfigs;
    queue?: Queue;
    getUpdateTx?: boolean;
}
export interface CurrentResult {
    maxResult: BN;
    maxTimestamp: number;
    mean: BN;
    minResult: BN;
    minTimestamp: number;
    range: BN;
    result: BN;
    stdev: BN;
}
export interface Update {
    oracle: string;
    value: BN;
    timestamp: number;
}
export interface AggregatorData {
    address: string;
    authority: string;
    createdAt: number;
    currentResult: CurrentResult;
    feedHash: string;
    maxStalenessSeconds: number;
    maxVariance: number;
    minResponses: number;
    minSampleSize: number;
    name: string;
    queue: string;
    updateState: {
        currIdx: number;
        results: Update[];
    };
}
export declare class Aggregator {
    readonly client: SwitchboardClient;
    readonly address: string;
    crossbarClient?: CrossbarClient;
    feedHash?: string;
    constructor(client: SwitchboardClient, address: string);
    static initTx(client: SwitchboardClient, sender: string, options: AggregatorInitParams): Promise<SimpleTransaction>;
    /**
     * Set configs for the Aggregator
     * @param tx - Transaction
     * @param options - AggregatorConfigParams
     */
    setConfigsTx(sender: string, options: AggregatorConfigParams): Promise<SimpleTransaction>;
    /**
     * Set the feed authority
     * @param tx - Transaction
     * @param options - AggregatorSetAuthorityParams
     */
    setAuthorityTx(options: AggregatorSetAuthorityParams): Promise<SimpleTransaction>;
    /**
     * Fetch the update transaction
     * @param sender - Sender
     * @param options - AggregatorFetchUpdateIxParams
     * @returns - FetchUpdateTxResponse
     */
    fetchUpdate(sender: string, options?: AggregatorFetchUpdateIxParams): Promise<{
        responses: FeedEvalResponse[];
        failures: string[];
        updates: number[][];
        updateTx: SimpleTransaction;
    }>;
    static parseAggregatorData(resource: any): AggregatorData;
    /**
     * Get the feed data object
     */
    loadData(): Promise<AggregatorData>;
    /**
     * Load all feeds
     */
    static loadAllFeeds(switchboardClient: SwitchboardClient): Promise<AggregatorData[]>;
    private i128ToUint8Array;
}
export declare const PullFeed: typeof Aggregator;
//# sourceMappingURL=index.d.ts.map